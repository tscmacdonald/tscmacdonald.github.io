<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="https://tscmacdonald.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://tscmacdonald.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2023-09-08T00:01:14+00:00</updated><id>https://tscmacdonald.github.io/feed.xml</id><title type="html">Thomas MacDonald</title><subtitle>Thomas MacDonald&apos;s personal website. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">Walls of Jerusalem - January 2022</title><link href="https://tscmacdonald.github.io/blog/2022/wallsofjerusalem/" rel="alternate" type="text/html" title="Walls of Jerusalem - January 2022"/><published>2022-01-10T00:00:00+00:00</published><updated>2022-01-10T00:00:00+00:00</updated><id>https://tscmacdonald.github.io/blog/2022/wallsofjerusalem</id><content type="html" xml:base="https://tscmacdonald.github.io/blog/2022/wallsofjerusalem/"><![CDATA[<p>A summer trip to the <a href="https://en.wikipedia.org/wiki/Walls_of_Jerusalem_National_Park">Walls of Jerusalem National Park</a> with some friends. We’d planned to camp for three nights in the park (Wild Dog Creek, Dixon’s Kingdom, and Lake Ball), but with the weather forecast turning sour with strong wind and flood warnings we ended up cutting the trip short by a day and skipping the lake to head home on day 3.</p> <p>Day 1 opened with grey but dry weather. We started with a steep slog from Lake Rowallan up to the plateau, followed by a more gentle walk alongside tarns and small lakes to eventually reach Wild Dog campsite nestled at the foot of Herod’s Gate.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220104_173812.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220104_173819.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220104_192236.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>Day 2 was our only clear weather of the trip, which we decided to make the most of by doing three summits. Starting from Wild Dog Creek, we walked up into the alpine valley sheltered by the Walls: tarns and pools, classically Tassie dolerite mountains, all dotted with beautiful stands of pencil pine. From Damascus Gate (the second major pass of the walk) a short but sharp scramble up to Solomon’s Throne rewarded us with stunning views over the ranges to the southwest and Cradle Mt/Barn Bluff to the northwest. After another short trip up The Temple it was down to the valley to make camp in Dixon’s Kingdom, sheltered from the wind by a big stand of pines. Finally, we used the last of the long daylight hours to climb Mt Jerusalem and gain a beautiful viewpoint back into the park, framed above by the peaks of Cradle Mt.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220105_094601(0).jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220105_100814.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220105_100827.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220105_102709.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220105_104856.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220105_111958.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220105_142532.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220105_145105.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220105_180426.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>With the weather forecast taking a sharp turn for the worst, we decided to make Day 3 our last and walk back out via dropping down from the mountains to the less-used junction track. The day started with mist and light rain leaving Dixon’s Kingdom as we descended town toward lakes Ball and Adelade. As we reached the lakes, the vegetation gradually changed from the alpine meadows of the Walls to dense myrtle and fagus (alongside the pines) and finally opened up into a long, wide, glaciated valley. The track here was clearly less maintained than the mountain tracks we’d been on until this point but was still clear and easy to follow, and with good weather preceding our trip the muddly sections were all dry and hard.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220106_080100.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220106_080407.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220106_101943.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220106_105714.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220106_112353.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220106_125309.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/2201_wallsofjerusalem/20220106_125948.jpg" class="img-fluid z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div>]]></content><author><name></name></author><category term="hobbies"/><category term="walking,"/><category term="camping"/><summary type="html"><![CDATA[Walking in Tasmania's Walls of Jerusalem National Park]]></summary></entry><entry><title type="html">Don’t be scared of diffusion NMR!</title><link href="https://tscmacdonald.github.io/blog/2021/diffusiontips/" rel="alternate" type="text/html" title="Don’t be scared of diffusion NMR!"/><published>2021-12-19T00:00:00+00:00</published><updated>2021-12-19T00:00:00+00:00</updated><id>https://tscmacdonald.github.io/blog/2021/diffusiontips</id><content type="html" xml:base="https://tscmacdonald.github.io/blog/2021/diffusiontips/"><![CDATA[<p>A friend messaged me the other day for some advice on how to run diffusion NMR measurements - or perhaps more accurately, on how <em>not</em> to run them. Here are some thoughts on the matter and on potential problems to be aware of when running diffusion NMR measurements. I assume basic familiarity with NMR and diffusion, and don’t meant to be at all comprehesive. If you’re starting to think about diffusion NMR but have no experience with it, I’d recommend starting with Bruker’s Diffusion NMR manual (a practical how-to guide) and then taking a look at Bill Price’s two articles on the fundamentals of pulsed gradient diffusion measurements: <a href="https://doi.org/10.1002/(SICI)1099-0534(1997)9:5%3C299::AID-CMR2%3E3.0.CO;2-U">Part 1: Basic Theory</a> and <a href="https://doi.org/10.1002/(SICI)1099-0534(1998)10:4%3C197::AID-CMR1%3E3.0.CO;2-S">Part 2: Experimental Aspects</a>.</p> <p>Finally, I’ve written this post assuming that the goal is to obtain an accurate, quantitative measure of diffusion under known conditions. This is not always necessary, and it’s probably OK to be less careful when using diffusion measurements for more qualitative tasks (e.g. resolving the components of a crude mixture by DOSY NMR).</p> <h1 id="diffusion-basic-physics">Diffusion: basic physics</h1> <p>What governs diffusion rates? The Stokes-Einstein-<a href="https://doi.org/10.1080/14786440509463331">Sutherland</a> equation for the diffusion of a hard spherical particle at low Reynolds number tells us:</p> \[D = \frac{k_B T}{6\pi\eta R_H}\] <p>where \(k_B\) is Boltzmann’s constant, \(T\) is the (absolute) temperature, \(\eta\) is the dynamic viscosity, and \(R_H\) is the hydrodynamic radius of the diffusing particle - the radius of a hard-edged sphere that would diffuse at the same rate. Real molecules are generally neither spherical nor hard-edged, so be careful when relating \(R_H\) to actual dimensions. I think of the hydrodynamic radius as an effective measure of the average size of a molecule incorporating any supramolecular ordering that may form: \(R_H\) of a single chemical species might vary in different solvents as a result of supramolecular (self-)association through solvent coordination, H bonding, ion pairing, cation-\(\pi\) interactions, and so on. As an example, Li+ ions coordinated in THF might appear “bigger” than Li+ in non-coordinating hexane. \(R_H\) can also vary based on the population distributions of different conformers or tautomers that may be favoured in different solvent environments.</p> <p>It might be tempting to argue that \(\eta\) is fixed for a given solvent and that temperature changes will be relatively small for a system at 298 K +/- a degree or so, and that diffusion is thus only really sensitive to \(R_H\) changing. <em>This is not the case</em>: for most solvents the viscosity \(\eta\) <em>also</em> varies strongly as a function of temperature, making the overall diffusion measurement much more sensitive to changes in temperature. Empirical measurements have found that the dependence of diffusion on temperature is often closer to an exponential Arrhenian relationship:</p> \[D(T) = A\exp{(-\frac{E_a}{k_B T})}\] <p>It’s not at all clear to me if \(A\) and \(E_a\) are physically meaningful quantities. This Arrhenian relationship also tends to break down for more “structured” solvents with stronger intermolecular interactions, such as water and small alcohols. Here are some <a href="https://doi.org/10.1039/B005319H">reported values</a> of the “activation energy” for diffusion of common molecular solvents:</p> <table> <thead> <tr> <th>Solvent</th> <th>\(E_a~\mathrm{/~kJ~mol^{-1}}\)</th> </tr> </thead> <tbody> <tr> <td>Cyclohexane</td> <td>13.7</td> </tr> <tr> <td>Dioxane</td> <td>13.9</td> </tr> <tr> <td>Dodecane</td> <td>13.7</td> </tr> <tr> <td>DMSO</td> <td>14.9</td> </tr> <tr> <td>Tetradecane</td> <td>15.6</td> </tr> <tr> <td>Pentanol</td> <td>24.1</td> </tr> </tbody> </table> <p>The take-home here is that diffusion measurements are specific to a solution temperature, and that good temperature control and/or monitoring (<a href="https://dx.doi.org/doi/10.1002/cphc.201900150">try a methanol capillary!</a>) are essential for quantitative diffusion measurements.</p> <h1 id="diffusion-nmr">Diffusion NMR</h1> <p>Pulsed-gradient diffusion NMR measurements involve:</p> <ol> <li>Acquiring a sequence of 1D spectra with a range of gradient pulse strengths</li> <li>Extracting the intensities (integrals or peak heights) of peaks of interest</li> <li>Fitting the Stejsal-Tanner equation to these intensities as a function of gradient strength, and obtaining diffusion coefficients</li> </ol> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/diffusionnmr/pgste.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Basic pulsed gradient stimulated echo (PGSTE) diffusion NMR sequence. </div> <p>The Stejskal-Tanner equation relates the acquired signal intensity \(I\) to the gradient pulse amplitude \(g\), nuclear gyromagnetic ratio \(\gamma\), gradient pulse length \(\delta\) and measurement time \(\Delta\), and diffusion coefficient \(D\). The exact form of this equation varies for different pulse sequences and gradient pulse shapes, but a typical formulation (assuming perfectly square gradient pulses) is:</p> \[I = I_0 e^{-D(g^2\delta^2\gamma^2(\Delta-\delta/3))}\] <p>In theory we can run a diffusion experiment by varying any one of \(g\), \(\delta\), or \(\Delta\). In practice, \(\delta\) and \(\Delta\) are almost always held constant while the gradient pulse amplitude \(g\) is varied across a set range of typically 0–50 gauss/cm.</p> <h2 id="convection">Convection</h2> <p>Convection is probably the most persistent problem affecting diffusion NMR measurements. It results from small temperature gradients across the sample, can occur at any time, and should never be forgotten or ignored. Convection is more likely in some systems than others: an experiment run with a room temperature-equilibrated instrument on a small sample in viscous DMSO is unlikely to suffer from convection, while a punching in a 20° temperature increase on a CDCl3 sample and running a diffusion experiment the moment the target temperature is reached will almost guarantee convection. <a href="https://tscmacdonald.github.io/projects/enhanceddiffusion/">Time-resolved diffusion measurements</a> of dynamic reacting systems or systems under irradiation are also likely to suffer from convection.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/diffusionnmr/convection.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Convection ruins diffusion NMR measurements and can occur at any time. Left: convection is often visible as an unusual phase twist in some of the 1D gradient slice spectra. Right: convection occurs when a more dense section of fluid is higher than a less dense section of fluid. Assuming positive thermal expansion (warmer fluid is less dense than cooler fluid), this can happen either when a vertical temperature gradient results in cool fluid sitting above warm fluid (Rayleigh-Benard convection) or when a horizontal temperature gradient exists (Hadley convection). A layer of warm fluid above a layer of cool fluid does not result in a density inversion, and cannot drive convection. </div> <p>Here are some signs of convection to look for when running diffusion NMR experiments:</p> <ul> <li>Convection will often cause phasing artefacts (see above), making it impossible to correctly phase all slices of the diffusion experiment at the same time. Always look at the spectral data before using it.</li> <li>Convection is somewhat random. Repeat the same measurement several times: if the results vary meaningfully, this may indicate convection.</li> <li>Convection will always result in an obtained diffusion coefficient higher than the real diffusion coefficient. If a range of diffusion coefficients are measured for the same sample, the lower values are likely to be more accurate than the higher values.</li> <li>The convection-induced error in a measurement increases roughly proportionally to \(\Delta\), the diffusion measureing time, while diffusion measurements are independent of \(\Delta\). Run a series of experiments with different \(\Delta\): if \(D\) increases with \(\Delta\), this is likely convection. The true diffusion coefficient can sometimes be found by fitting a line through multiple \(D(\Delta)\) measurements and extrapolating to \(\Delta = 0\).</li> </ul> <p>Here are some tips for avoiding or preventing convection:</p> <ul> <li>Use a more viscous solvent. Experiments in DMSO-d6 are much less likely to suffer from convection than experiments in CDCl3; experiments at low temperature (=increased viscosity) are less likely to suffer from convection than experiments at high temperature (=decreased viscosity).</li> <li>Give the instrument plenty of time to equilibrate after temperature changes, and avoid changing the temperature unnecessarily.</li> <li>Use non-standard smaller NMR sample tubes: convection is less likely to occur in more narrow geometries. I’ve had success in replacing standard 5 mm NMR tubes with smaller 3 mm tunes. Similarly, don’t overfill your sample: 0.5 mL in a standard tube is plenty.</li> <li>Pack the sample with a physical obstruction to impede flow. <a href="https://pubs.acs.org/doi/10.1021/jacs.0c09072">I’ve had success</a> (see SI) by adding short pieces of broken glass TLC capillaries to a standard sample tube, and I’ve heard good things about glass wool. Avoid magnetic or high surface area materials - you want to disrupt flow without changing the chemical or magnetic environment. This approach can make shimming take a little longer, but I’ve found that lineshapes are normally OK eventually.</li> </ul> <p>For more on this topic, see this paper and many others from Gareth Morris’ research group: <a href="https://doi.org/10.1016/j.jmr.2014.12.006">Sample convection in liquid-state NMR: Why it is always with us, and what we can do about it</a>.</p> <p>Final note: some diffusion NMR pulse sequences incorporate “convection suppression” elements, designed to filter out and remove the influence of convection. I don’t really understand how this works and am skeptical of relying on convection-suppressing sequences to filter out the effects of convection, rather than using the approaches above to physically prevent it.</p> <h2 id="overlapping-peaks-give-averaged-diffusion-coefficients">Overlapping peaks give averaged diffusion coefficients</h2> <p>Diffusion coefficients are obtained by fitting NMR peak intensities to the Stejskal-Tanner equation. “Intensity” here normally refers to either the peak integral or the peak amplitude: I prefer to use integrals due to the higher signal-to-noise and insensitivity to small changes in lineshape or shim during the experiment. But what happens when integrating a region of the spectrum captures overlapping peaks from multiple chemical species, or when looking at a peak corresponding to multiple chemical species in fast exchange? The data will give an <strong>averaged</strong> diffusion coefficient sitting somewhere between the diffusion coefficients of the overlapping species.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/diffusionnmr/peakoverlap.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Diffusion NMR measurements generally cannot resolve the diffusion coefficients of two overlapping peaks. Here, compounds A (red peaks) and B (blue peaks) respectively have diffusion coefficients of 1 and 3. These diffusion coefficients can be measured accurately by integrating non-overlapping peaks (red and blue lines) and fitting peak intensities to the Stejskal-Tanner equation. If the overlapping peak (green) is used for monoexponential fitting, an intermediate _average_ diffusion value will be obtained. </div> <p>If the overlapping species have reasonably different diffusion coefficients, it’s sometimes possible to separately resolve their diffusion coefficients by fitting a multiexponential function to the obtained data—something like:</p> \[I = I_1 e^{-D_1(g^2\delta^2\gamma^2(\Delta-\delta/3))}_1 + I_2 e^{-D_2(g^2\delta^2\gamma^2(\Delta-\delta/3))}\] <p>Unfortunately, resolving overlapping peaks into separate diffusion coefficients like this tends to be difficult and uncertainties on the fitted parameters are often large. In most cases it’s probably better to throw away the overlapping peaks and limit your analysis to the well-resolved peaks of interest.</p>]]></content><author><name></name></author><category term="work"/><category term="NMR,"/><category term="diffusion,"/><category term="chemistry"/><summary type="html"><![CDATA[Some basic tips for good NMR diffusion measurements]]></summary></entry><entry><title type="html">Building a personal website</title><link href="https://tscmacdonald.github.io/blog/2021/newwebsite/" rel="alternate" type="text/html" title="Building a personal website"/><published>2021-12-17T00:00:00+00:00</published><updated>2021-12-17T00:00:00+00:00</updated><id>https://tscmacdonald.github.io/blog/2021/newwebsite</id><content type="html" xml:base="https://tscmacdonald.github.io/blog/2021/newwebsite/"><![CDATA[<p>I’ve been thinking for a while that it would be good to start a personal website, both as a collection of thoughts in one place and as a personal portfolio. Finding the right solution took a little while and a few false starts. My first thought was Wordpress, either as a managed or self-hosted solution. I’d tried a few small managed blogs through wordpress.com before but had found it both limited and complicated to customise. Squarespace, another managed website solution, was unsatisying for similar reasons. Self-hosted Wordpress seemed like it could be a better option, but getting a site up and running had always proved more challenging than I’d expected and as a self-taught amateur server admin I was cautious about the security implications of running a publicly-exposed WP site from my home LAN.</p> <p>Finally, I found some discussion on Twitter about using <a href="https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages">GitHub Pages</a> for an easily-configurable personal website and was convinced almost immediately. Here are a few advantages of Pages, as I see them:</p> <ul> <li>Free hosting with minimal restrictions for a small (&lt;1 GB) site</li> <li>Static site design built with <a href="http://jekyllrb.com/">jekyll</a>: web pages are lightweight HTML, served quickly and efficiently.</li> <li>All content (text and media) stored and edited as plain files in a legible directory structure making it easy to find, add, and edit content. Text content written as standard markdown.</li> <li>Everything stored in a standard repository, making it fast and easy to transfer to a self-hosted site if needed.</li> </ul> <p>All in all, it’s a great solution if you’re someone that’s computer-literate enough to write markdown and occasionally tinker with HTML, but not enough of a web developer to write your own CSS or <a href="https://en.wikipedia.org/wiki/Log4Shell">keep your Apache updated</a>. To make things even easier, there are plenty of themes available on GitHub to fork and use as a starting point. I only considered a handful but ended up settling on <a href="https://github.com/alshedivat/al-folio">al-folio</a> as a minimal theme with built-in support for blogging, projects, and an academic bibliography.</p> <p>So far, I’m happy with this setup. Building from plaintext files gives me the freedom to write and edit the way I want to, and it’s nice to have a little more exposure to jekyll and git. If you like the look of this site, you’re more than welcome to fork the <a href="https://github.com/tscmacdonald/tscmacdonald.github.io/">underlying repository</a> and use it as a base for your own work - feel free to get in touch if you need a hand getting things working from that point, and I’ll see what I can do to help.</p>]]></content><author><name></name></author><category term="personal"/><category term="computers,"/><category term="web"/><summary type="html"><![CDATA[If you can read this it's probably working]]></summary></entry><entry><title type="html">Displacement mapping the 2019 Albanian earthquake with Sentinel-1 InSAR</title><link href="https://tscmacdonald.github.io/blog/2020/albanianinsar/" rel="alternate" type="text/html" title="Displacement mapping the 2019 Albanian earthquake with Sentinel-1 InSAR"/><published>2020-04-23T00:00:00+00:00</published><updated>2020-04-23T00:00:00+00:00</updated><id>https://tscmacdonald.github.io/blog/2020/albanianinsar</id><content type="html" xml:base="https://tscmacdonald.github.io/blog/2020/albanianinsar/"><![CDATA[<p>With COVID isolation continuing, I’ve returned to a topic that has interested me for a long time: synthetic aperture radar (SAR), and more specifically SAR interferometry (InSAR). InSAR is a great tool for measuring small ground displacements that can result from earthquakes, landslides, or subsidence into cavities such as those left behind by oil and gas exploration. There are a number of SAR satellites in operation currently, but I’ll be using freely accessible data from the ESA’s Sentinel-1 platform.</p> <p>As a first toy problem, I decided to look at the site of the <a href="https://en.wikipedia.org/wiki/2019_Albania_earthquake" target="\_blank">earthquake that hit Albania last year</a> on November the 26th. The steps I take are largely based on <a href="http://step.esa.int/docs/tutorials/S1TBX%20TOPSAR%20Interferometry%20with%20Sentinel-1%20Tutorial_v2.pdf" target="\_blank">this ESA tutorial document</a>.</p> <p>This earthquake hit Albania near the town of Durres, so to start off I chose two SLC data products (<code class="language-plaintext highlighter-rouge">S1A IW SLC 1SDV 20191125T164052 20191125T164119 030070 036F2E 4A87</code> and <code class="language-plaintext highlighter-rouge">S1A IW SLC 1SDV 20191207T164051 20191207T164118 030245 03752F F624</code>) from Copernicus Scihub (not to be confused with Sci-hub!) that were acquired on the 25th of November and the 7th of December. Interferometry involves measuring phase differences between pairs of imagery, so we need phase-sensitive single-look complex (SLC) data products rather then the smaller and more processed products often used for SAR imaging.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/albanianinsar/1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Acquisition footprint for the imagery used here. We’ll be focusing on the stretch of Albanian coast just north of Durres. </div> <p>After downloading the two SLC products, I imported both into into ESA’s SNAP toolbox and used the TOPS Split operator to cut down the product to the region and data of interest. We don’t need the VH scattered polarisation for interferometry and we don’t care about Italy or the Adriatic, so I sliced each data product to only include VV-polarised data from bursts 4-9 of subswath IW3, as below.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/albanianinsar/2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> TOPS Split to reduce the size of the dataset to the regions and polarisation of interest. </div> <p>I then applied orbit corrections to each each product (<em>Radar &gt; Apply Orbit File</em>) and combined the two products into a coregistered stack with back-geocoding using the SRTM 1sec model (<em>Radar &gt; Coregistration &gt; S-1 TOPS Coregistration &gt; S-1 Back Geocoding</em>). I expected this to mask out the zero-elevation sea portion of the imagery, but it didn’t seem to do so. With coregistered data in hand, I was then able to create an interferometric product in SNAP (<em>Radar &gt; Interferometric &gt; Products &gt; Interferogram formation</em>), checking ‘Subtract topographic phase” to remove the influence of static ground geometry. The interferogram produced at this point is very noisy and still contains horizontal bands showing the gaps between the separate bursts collected by S-1, but the fringes of an interference pattern centred on the coast are visible if you squint a little bit.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/albanianinsar/3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Interferogram. The noisy area on the left hand side is the Adriatic sea, while the land area has slightly more coherent interference phases. Horizontal bands mark the separation between the six burst images making up this large scene. The deformation resulting from the earthquake is visible as a series of concentric interference fringes, about halfway up the image and a third of the way in from the left. </div> <p>The next steps are to stitch the different bursts together into a composite (“debursting”; <em>Radar &gt; Sentinel-1 TOPS &gt; S-1 TOPS Deburst</em>), and use a Goldstein filter (<em>Radar &gt; Interferometric &gt; Filtering &gt; Goldstein Phase Filtering</em>) to clean up some of the noise. The image becomes much more clear at this point, although there are still patches of noise. We now have what looks like some decent interferometric data, but converting this into displacement measurements requires the additional step of “unwrapping”. Unwrapping is a computationally expensive process that brings my laptop to its knees for several hours at a time, so I took a subset of the most relevant parts of the image to avoid wasting CPU time processing the boring parts. In hindsight even this subset took an unreasonable amount of time to process and I should have trimmed even more aggressively.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/albanianinsar/4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Effects of debursting and Goldstein phase filterering: the bursts have been stitched into a single composite scene, and the pattern of the phase distortions is much more clearly visible. Only the subset within the rectangle is considered further. </div> <p>Unwrapping attempts to convert periodic phase measurements into absolute displacement measurements, effectively by working out the boundaries between integer numbers of wavelengths. I’ve tried to illustrate this below with a crude MS Paint slice-up of a line measured from the centre of the concentric phase rings to the top right corner of the subset shown above.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/albanianinsar/5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Phase unwrapping to access displacement information. Phase is periodic over -π/+π, but successful unwrapping can tell us how many wavelengths two points are removed from each other, as well as the relative phase. Here, there seems to be a 3 or 4-wavelength difference in displacement between the centre of the disturbance (left) and the top right corner of the image (right), depending on whether the extremely noisy band is a full phase cycle or not. This corresponds to a ~15–20 cm displacement at a C-band SAR wavelength of 5.5 cm. </div> <p>SNAP can’t do phase unwrapping, but it can interface with a utility—snaphu—which does. I can’t seem to get the actual processing to work within SNAP, but was able to export the phase data for unwrapping (<em>Radar &gt; Interferometric &gt; Unwrapping &gt; Snaphu Export</em>) and then run snaphu from the command line on the exported data. This took about five hours wall time to complete on my laptop (Ryzen 3500U), running as 6 CPU threads.</p> <p>Once the unwrapping has finished, the unwrapped data can be imported into SNAP (<em>Radar &gt; Interferometric &gt; Unwrapping &gt; Snaphu Import</em>) and converted from unwrapped phase information to displacement data (<em>Radar &gt; Interferometric &gt; Products &gt; Phase to Displacement</em>). We now have a displacement map (below), but it’s hard to relate this to on-the ground differences. The major changes in displacement (to the left and bottom) are over the water, probably caused by changing tides, and the imagery is still a satellite-eye view that can’t be directly projected onto terrain.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/albanianinsar/6.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Displacement map before range-doppler correction. The deformation resulting from the earthquake can be seen as a pale yellow patch in the centre of the image, but is overshadowed by the uninteresting but major changes in displacement over the Adriatic sea. </div> <p>Finally, we can run a range-doppler correction on the displacement map (<em>Radar &gt; Geometric &gt; Terrain Correction &gt; Range-Doppler Terrain Correction</em>) to produce a displacement map of the land area only, scaled to a correct geographic projection. This product can be viewed in SNAP, but for convenience we can export it as a KMZ file and view it in Google Earth superimposed over optical imagery. At this point it’s clear that the unwrapping process has somehow missed the baseline (I suspect that the large area of water might have interfered): the relative changes in displacement look good, but somehow we have the earthquake epicentre set as the location which hasn’t moved, and the rest of the country having dropped by ~10 cm around it. This is clearly incorrect, but I don’t actually know how to re-set the baseline for the displacement band correctly. For a rough estimate I’d add about 9–9.5 cm to the numbers displayed on the legend, suggesting that Hamallaj was lifted by about 11–12 cm following the November earthquake.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/albanianinsar/7.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Displacement mapping exported to Google Earth. The upthrust from the earthquake is clearly visible, centred on Hamallaj, but the baseline has somehow ended up miss-set such that the rest of the country appears to have dropped while Hamallaj maintained its previous location. </div> <p>I don’t have much other information regarding this earthquake to compare this data to, but Wikipedia has a nice map showing the shaking intensity resulting from the earthquake. It compares well to the displacement data obtained here, but the epicentre seems to sit to the northeast of the region of maximum displacement (white-yellow). A little further north there’s an area that the interferometry data says <em>dropped</em> as a result of the earthquake, shown in blue. Knowing very little about seismology, my interpretation of this would be that the earthquake involved a movement from the northeast to the southwest: following the fault, rock moved southwest leading to a bulge in the southwest and a depression in the northeast.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/albanianinsar/8.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> The displacement map compares well to the map of shaking intensity, and from first principles I think it’s suggestive of a movement towards the southwest, leaving a dip (blue) to the northeast. </div> <p>It seems that this guess is actually pretty close to the truth. An article published on studying this earthquake with Sentinel-1 data (<a href="https://doi.org/10.3390/rs12050846"><em>Remote Sensing</em> <strong>2020</strong>, <em>12</em>, 846</a>) includes this figure showing a modelled downwards displacement to the northeast, but it looks like the patchy blue stuff in the displacement data above is an artefact rather than a real deformation. Ah well, you don’t get everything but I’m still pretty happy with how this turned out.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/albanianinsar/9.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> This work from some the actual experts in the area seems reasonably close to my tentative guess of a northeast to southwest fault. </div> <p>For anyone interested, here’s the <a href="https://drive.google.com/file/d/1_TBzUFNNS-o2Nrai4obZTgf2uTMb-rzf/view?usp=sharing">.kmz</a> of the displacement data.</p>]]></content><author><name></name></author><category term="hobbies"/><category term="remote-sensing"/><summary type="html"><![CDATA[A short trip through some amateur SAR interferometry]]></summary></entry><entry><title type="html">Geo4nonpro’s lockdown geolocation challange - week 2, image 2</title><link href="https://tscmacdonald.github.io/blog/2020/geo4nonpro_4/" rel="alternate" type="text/html" title="Geo4nonpro’s lockdown geolocation challange - week 2, image 2"/><published>2020-04-20T14:00:00+00:00</published><updated>2020-04-20T14:00:00+00:00</updated><id>https://tscmacdonald.github.io/blog/2020/geo4nonpro_4</id><content type="html" xml:base="https://tscmacdonald.github.io/blog/2020/geo4nonpro_4/"><![CDATA[<p>The second set of geolocation challenges arrived, featuring 10 new images to place. As with week 1, these range in difficulty with some much easier to place than others. Image #1, however, took me more than twice as long to locate as did the other 9 images combined.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk21i1.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> The quality is pretty rough, but at a glance this seems to be a power plant of some sort. </div> <p>The picture shows cooling towers located behind a long industrial building with railway line entering the main doors. The cooling towers suggest a power plant, which in this context likely means a nuclear power plant. The dismal setting and featureless landscape suggests Russia.</p> <p>Once again, Yandex reverse image search picks this out as the Sibirskaya Nuclear Power Plant (alas), and Wikipedia gives us the coordinates <a href="https://tools.wmflabs.org/geohack/geohack.php?pagename=Sibirskaya_Nuclear_Power_Plant&amp;params=56_37_37_N_84_54_19_E_type:landmark">56°37′37″N, 84°54′19″E</a>. With that we’re off to Google Earth, where the pin drops us onto a location that doesn’t quite resemble the power plant shown above: there are no cooling towers in sight, but there are a collection of circular concreted areas. A quick return to Wiki tells us that the power plant was decommissioned in 2008, and Google’s historical imagery reveals that the cooling towers were demolished some time between 2010 and 2012.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk21i2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Historical imagery of the decommissioned Sibirskaya NPP shows that the distinctive cooling towers were demolished some time between 2010 and 2012. </div> <p>We can now see a nice set of cooling towers, but it’s hard to match this scene to the photograph above. The photo shows a long building aligned to a double row of cooling towers, but the long building visible in this imagery doesn’t align with either of the cooling tower clusters. Looking around the site a little more reveals a second set of buildings about 2 km to the north, and this time the long building lines up very nicely with a set of cooling towers: the photographer is to the south of the complex, looking north.</p> <p>The many sharply defined features in this photograph over a wide range of depths provide plenty of choice in sighting some angles. Here I’ve chosen four lines linking various features of the buildings that can be identified on Google Earth. Tracing lines through these points suggests that the photograph was taken from somewhere near the easternmost cooling tower of the southern set (location: 56.641911, 84.912230).</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk21i3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Lines of sight. This photo provides plenty of corners of buildings etc to draw lines between. The convergence of the sightlines suggests that the photograph was taken from somewhere near the easternmost cooling tower of the southern set. </div> <p>My first thought at this point was that the photo was taken from the top floor of the building next to the cooling towers (56.642855, 84.912388), but the angles don’t quite line up. In addition, this shot was taken from quite some height above the roof of the long building but by looking at the shadows we can see that the southern building is no higher than the long building to its north. There are some very tall buildings in that location, though: the cooling towers themselves. A photograph taken from the top of the easternmost cooling tower would fit the sight lines plotted above, and would explain the view from high above the two/three-story main building of the complex. I wonder how difficult it is to climb to the top of a 1950s-vintage Soviet cooling tower?</p>]]></content><author><name></name></author><category term="hobbies"/><category term="geolocation"/><summary type="html"><![CDATA[An old photo, taken from a surprising location]]></summary></entry><entry><title type="html">Geo4nonpro’s lockdown geolocation challange - week 2, image 1</title><link href="https://tscmacdonald.github.io/blog/2020/geo4nonpro_3/" rel="alternate" type="text/html" title="Geo4nonpro’s lockdown geolocation challange - week 2, image 1"/><published>2020-04-12T14:00:00+00:00</published><updated>2020-04-12T14:00:00+00:00</updated><id>https://tscmacdonald.github.io/blog/2020/geo4nonpro_3</id><content type="html" xml:base="https://tscmacdonald.github.io/blog/2020/geo4nonpro_3/"><![CDATA[<p>The second set of geolocation challenges arrived, featuring 10 new images to place. As with week 1, these range in difficulty with some much easier to place than others. Image #1, however, took me more than twice as long to locate as did the other 9 images combined.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk2i1.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> It’s a truck, in Russia, being decontaminated. And is that a derailed train in the background?.. </div> <p>This image features a truck being decontaminated by people in protective clothing, suggesting a chemical or radiological accident or training scenario. There’s a weirdly half-built prefab concrete building in the background, and behind it is what looks like a derailed passenger train. This confused me in a way that with hindsight should have raised more alarm bells: why would a passenger train accident release a chemical/radiological hazard?</p> <p>Yandex doesn’t return a direct match for the image, so we’re off to a slightly challenging start. It does inform us that the truck is a ZIL-130… which Russia has produced literally millions of, so that’s not much help either. The license plate, however might provide us with some useful information. Wikipedia’s <a href="https://en.wikipedia.org/wiki/Vehicle_registration_plates_of_Russia">article on registration plates in Russia</a> informs us that the “A” prefix means that this is a government vehicle (unsurprising), and the “174” suffix means that it’s registered in Chelyabinsk. Chelyabinsk immediately brings to mind the Mayak plutonium plant, based in the city of Ozersk, but with millions living and working in Chelyabinsk Oblast Mayak isn’t the only possibility. At this point I spent an hour on Yandex trying to lookup the owner of the vehicle license plate and find out which government department owned this vehicle, but to no luck. I also discovered that Russian number plates are filled consecutively for each A-xxx-BC series, so tried to look up some other A-xxx-PM 174 plates in the hope of identifying other ZIL-130 trucks perhaps registered together. No luck.</p> <p>At this point I wasn’t sure if the photo was of a real accident or a training scenario, so I spent some time searching Yandex for terms relating to Chelyabinsk, Ozersk, Mayak, Snezhinsk and train chemical accident or train nuclear accident. I found a lot of info on a bad bromine spill in Chelyabinsk a few years back, but nothing that looked consistent with this photo. I concluded that this is probably a training scenario: the passenger train derailment doesn’t really fit with a radiological accident, and the building looks like a prefab stand-in of the sort that might be put up quickly for an exercise.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk2i2.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Radiological emergency response training from АТЦ Росатом. This exercise is in St Petersburg, not Chelyabinsk, but it has a similar vibe to the picture we’re looking at. </div> <p>I then started searching for terms related to “radiological accident training exercise Chelyabinsk” in Yandex. After a little searching I was able to find <a href="http://nwatom.ru/press-sluzhba/novosti-fgup-erc-spb/217-kompleksnaya-trenirovka-s-organami-upravleniya-i-personalom-avarijno-spasatelnogo-formirovaniya-fgup-atts-spb-i-ooo-npo-sosny">this article</a> on the NW Atom (АТЦ Росатом) website. It’s discussing a training scenario in St Petersburg, not Chelyabinsk, but the general vibe is pretty similar to the target photograph. What is NW Atom, exactly? It turns out to be the Rostaom sub-organisation responsible for emergency response, which sounds like the sort of group that might be running the exercise we’re looking for. A little research told me that АТЦ Росатом has emergency response teams stationed across Russia, but none in Chelyabinsk: the nearest ones are in Glazovsky, to the West, and Seversk to the East. Both locations are over 1000km from Chelyabinsk, which seems a little far to go for a training exercise but maybe plausible.</p> <p>The NW Atom website has a <a href="http://nwatom.ru/press-sluzhba/novosti-fgup-erc-spb">press centre section</a> reporting on their activities. I decided to look through it for any exercises involving the Seversk or Glazovsky branches of the organisation. It seems that in 2019, <a href="http://nwatom.ru/press-sluzhba/novosti-fgup-erc-spb/556-uchastie-v-taktiko-spasatelnykh-ucheniyakh-ural-2019">the Seversk branch ran an exercise in Chelyabinsk</a> called “Ural 2019”. I wasn’t wrong about the distances being big: apparently the response crew covered 3960 km between the 19th of September and the 2nd of October. The press release didn’t really include any useful photographs, but this sounds like it may be what we’re looking for.</p> <p>Searching Yandex for the description of the exercise in the title of the press release, участие в тактико-спасательных учениях “Урал-2019”, turned up a <a href="https://www.youtube.com/watch?v=jTUrxsGfE6E">video report on Youtube</a>. I used WeVerify’s <a href="https://weverify.eu/verification-plugin/">Invid Toolbar</a> to split the video into keyframes, and it’s clear that we’ve found the right place: we can identify the ZIL-130 truck by its registration plate, and gain some different angle shots of the derailed train.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk2_G1_0.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk2_G1_1.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk2_G1_2.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Keyframes from the YouTube video report on the Ural-2019 exercise. A robot was used to move a radiological source into containers behind the truck in the target photo. The derailed train contains a red tanker carriage that should be visible in Google’s imagery. </div> <p>However, we still don’t know where the article took place. A little more searching led me to <a href="https://www.atomic-energy.ru/news/2019/10/03/97898">this article</a> which informs us that the exercise occured in the town of Novogornyy, between Chelyabinsk and the Mayak plant. At this point I spend some time looking at all the railways in and near Novogornyy for a flat gravelled area, but couldn’t find any and so returned to re-read the article more carefully. The atomic-energy.ru article linked above tells us that the exercise occurred “На полигон учебно-спасательного центра МЧС РФ”, or at the training grounds of the RF Ministry for Emergencies. Looking at <a href="http://wikimapia.org/#lang=en&amp;lat=55.637299&amp;lon=60.802588&amp;z=15&amp;m=w">Wikimapia for Novogornyy</a>, this is labelled as a site to the northeast of the town. The site doesn’t have a rail link: the rails in the photograph are clearly only a short section for training purposes. Casting around the site for a large bright red object reveals the train carriages at 55.638486°, 60.802021°, and by sighting the “derailed” carriage over the end of the fake building and the power pole behind the 3rd window of the carriage on the track we’re able to locate the photographer at 55.638426°, 60.803911°.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk2i3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Google Earth imagery of the Novogornyy emergency response training ground. The distinctive red rail carriage identifies the location, and sightings to the features in the target photo are used to pinpoint the photographer. </div> <p>This took me several hours of work to get through, but felt extremely satisfying: with no single result for the original image, putting together the pieces that eventually led to Novogornyy felt like a proper open-source investigation. Everything was great until one of the other geolocators pointed out that a simple Google reverse image search led to the exact page the photograph came from, buried right at the bottom of the page under a useless pile of pictures of jumping castles and non-Russian blue trucks (I never did find the original photograph online). If I’d noticed this, the search would probably have taken me a tenth as much time as it did in the end. Ah well, I still feel pretty good for locating my first image without being able to identify the exact source it came from.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk2i4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div>]]></content><author><name></name></author><category term="hobbies"/><category term="geolocation"/><summary type="html"><![CDATA[A train that is not a train]]></summary></entry><entry><title type="html">Geo4nonpro’s lockdown geolocation challange - week 1, image 2</title><link href="https://tscmacdonald.github.io/blog/2020/geo4nonpro_2/" rel="alternate" type="text/html" title="Geo4nonpro’s lockdown geolocation challange - week 1, image 2"/><published>2020-04-11T14:00:00+00:00</published><updated>2020-04-11T14:00:00+00:00</updated><id>https://tscmacdonald.github.io/blog/2020/geo4nonpro_2</id><content type="html" xml:base="https://tscmacdonald.github.io/blog/2020/geo4nonpro_2/"><![CDATA[<p>The second image is perhaps the hardest of the set to geolocate. This image depicts a group of three people standing on a hill and looking at an enormous explosion some distance away:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk12i1.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Geolocation challenge: Week 1, image 2. </div> <h2 id="reverse-image-search">Reverse image search</h2> <p>As usual, step 1 is to plug this picture into a Yandex reverse image search. There are plenty of hits of this exact picture, and clicking through to one of the many news stories reveals that the people are in the town of Achinsk watching a series of explosions from a nearby ammunition depot on August 5, 2019. A little more searching turned up a <a href="https://medium.com/dfrlab/damage-assessment-of-the-achinsk-ammunition-depot-explosions-ed4643f15230">blogpost geolocating the image</a>, but that ruins the fun so we’ll carry on.</p> <h2 id="locating-the-site-of-the-explosion">Locating the site of the explosion</h2> <p>A number of articles mention that the explosions occurred around 10km from Achinsk. Achinsk is isolated enough that there are only a few features on Google Earth that sit ~10 km out. One is a military installation located at 56.170033, 90.402591 that <a href="http://wikimapia.org/#lang=en&amp;lat=56.169641&amp;lon=90.404692&amp;z=14">Wikimapia identifies as the 60th Combat Engineers Regiment</a>. Seems promising! We know that the blast occured on the 5th of August, so let’s use Google Earth’s historical imagery to see if the site changed in imagery taken before and after that date:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk12i2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Damage to the military site located at 56.170033, 90.402591 caused by the explosion on August the 5th </div> <p>With blast damage all over the site and many buildings destroyed, this looks to be the source of the explosion.</p> <h2 id="but-where-in-achinsk-are-the-viewers">But where in Achinsk are the viewers?</h2> <p>We now have the location of the explosion: about 10 km southwest of Achinsk. As the photo seems to be taken from a hill overlooking Achinsk, we can now say that the onlookers are going to be roughly northeast of Achinsk looking southwest. The large street visible to the right of the people looks like a major road, and should be useful to get a better idea of where the people are standing.</p> <p>Looking back at Wikimapia, the main road running northeast-southwest through Achinsk looks to be Ulitsa Kravchenko. Taking a (virtual) drive down Ul. Kravchenko in Google Streetview quickly confirms that this is indeed the correct location, with the distinctive blue-roofed apartments sitting at the corner of Ul. Kravchenko and Ul. Zvereva.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk12i3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Google Streetview allows us to check features from the ground level. Here, the features from the street seen in the right-hand side of the picture can be matched to locations on Ul Kravchenko. </div> <h2 id="locating-the-people-on-the-hill">Locating the people on the hill</h2> <p>We now know the people are on a hill slightly to the south of Ul. Kravchenko, looking southwest. Looking more carefully at the image, there seems to be tower of some sort jutting out above the blue roof of the apartment building. There’s a stadium about 1 km past the apartments in that direction, and by picking a Google Earth image from a sunny day it’s possible to see the long shadows of a tall lighting tower. Projecting a line from the lighting tower over the south edge of the apartments should lead us right to the photographer.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk12i4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> A lighting tower from a nearby stadium is visible over the apartment block identified earlier. Projecting a line from the lighting tower over the apartments should take us to the photographers. </div> <p>Following the line from the lighting tower over the apartments leads past the end of Ul. Kravchenko and over a few streets of low suburban houses. After that comes a forested area on the side of a hill. The people in the photograph seem to be well above the city of Achinsk, and so it seems reasonable to expect that they might have climbed to the top of the hill to watch the fireworks. Google Earth can calculate the elevation over a drawn line, and we can use this tool to work out where the top of the hill is and locate the group of people.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk12i5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Looking at the elevation profile along the projected line shows us a hill with the face partially covered in trees – just like in the photograph! A clearing near the top of the face of the hill is shown as a dashed yellow oval. </div> <p>The projected line passes through the houses before encountering a fairly steep hill, initially as a tree-covered face. Following the elevation profile leads us straight to a clearing near the top of the hill but before it flattens, matching the location shown in the initial photograph.</p>]]></content><author><name></name></author><category term="hobbies"/><category term="geolocation"/><summary type="html"><![CDATA[Finding that mysterious explosion]]></summary></entry><entry><title type="html">Geo4nonpro’s lockdown geolocation challange - week 1, image 1</title><link href="https://tscmacdonald.github.io/blog/2020/geo4nonpro_1/" rel="alternate" type="text/html" title="Geo4nonpro’s lockdown geolocation challange - week 1, image 1"/><published>2020-04-11T12:00:00+00:00</published><updated>2020-04-11T12:00:00+00:00</updated><id>https://tscmacdonald.github.io/blog/2020/geo4nonpro_1</id><content type="html" xml:base="https://tscmacdonald.github.io/blog/2020/geo4nonpro_1/"><![CDATA[<p><a href="https://nonproliferation.org/geo4nonpro-project/">Geo4nonpro</a> ran a geolocation challenge for those of us housebound by coronavirus. For my own records and the possible interest of others, I wrote down some of my approaches to solving the challenges posted.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk1i1.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Week 1, image 1 </div> <p>The first image shows a group of people walking along a road in front of a rocket or missile on a launchpad. There is Korean script on the rocket and the top section is decorated with DPRK flags: this might be enough to suggest an Unha launch from the Sohae space launch centre to some of you, but if not let’s look to Yandex reverse image search for some more information:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk1i2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Yandex reverse image search for the above picture brings up many additional pictures of the site. Clicking through to any of the linked pages reveals that the location is the Sohae space launch centre. </div> <p>Yandex does a great job here, and quickly tells us that this is a picture of the Sohae launch centre. The <a href="https://en.wikipedia.org/wiki/Sohae_Satellite_Launching_Station">Wikipedia article for Sohae</a> gives us coordinates of <a href="https://tools.wmflabs.org/geohack/geohack.php?pagename=Sohae_Satellite_Launching_Station&amp;params=39.66_N_124.705_E_type:landmark">39.660°N 124.705°E</a> for the site, so with that it’s off to Google Earth for some more precise geolocation of the site. The coordinates from Wiki articles aren’t always perfect, but in this case it drops us right on top of the launch tower.</p> <h2 id="rough-orientation-in-google-earth">Rough orientation in Google Earth</h2> <p>There are two key features immediately visible: a tall launch tower (see how long the shadow is!), and a recessed concrete flame pit structure to redirect the exhaust of the rocket. The concrete flame pit gives the rough location of the photograph: to the North of the launch pad, looking South towards it.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk1i3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Sohae in Google Earth. The launch tower and flame pit allow us to roughly locate the location of the photographer as to the North of the site, looking South. </div> <h2 id="using-sight-lines-to-narrow-down-the-location">Using sight lines to narrow down the location</h2> <p>With a rough direction, the next step is to more precisely locate where the photograph was taken from. To do this I looked to take sight lines from vertically aligned objects in the photograph that would be identifiable from satellite imagery. There isn’t a great deal to work with in this picture, but one nicely aligned set of features contains the rightmost large Korean character flag/sign of the left group, the back corner of the concrete flame pit, and the front wall of the flame pit where the angled top becomes flat. All three of these features are visible in Google’s imagery, allowing us to project a line past the road (ahah!) and into a field that looks similar to that seen in the photograph.</p> <p>To triangulate location more accurately, I took a second line from where a dip in the ground (green line, below) behind the launchpad meets the treeline, and drew this down to the corner of the field where in meets the road. Projecting a line through these two points suggests that the photo was taken from near the front of the field (below).</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk1i4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Projecting sight lines to locate the position of the photographer. Two lines were drawn, both of which suggest the photo was taken from near the front of the field at the bottom of the rightmost image. </div> <h2 id="tightening-the-location-with-an-estimation-of-distance">Tightening the location with an estimation of distance</h2> <p>As a final check, I tried to estimate the distance of the photographer by mensuration. Using Illustrator’s measurements, the Unha SLV on the launchpad appears to be 1.75 cm wide and 20.07 cm high in this photograph. Picking five of the men in the front of the group on the road and measuring the heights of their heads give 0.64, 0.72, 0.69, 0.66, and 0.66 cm for an average of 0.67 cm.</p> <p>Wikipedia suggests that the <a href="https://en.wikipedia.org/wiki/Unha">Unha SLV</a> has a diameter of 2.4 m and a height of 28 m, giving 137x and 139x magnification for the SLV. The height of an <a href="https://en.wikipedia.org/wiki/Human_head">average male human head</a> is 23 cm, giving a magnification of 34.3x for our pedestrians. Dividing 138 by 34.3 tells us that the SLV is 4.0x times as far from the camera as the walking group are. Drawing some lines between the estimated position of the people on the road and the launch tower narrows the photographer’s location to about 380 m from the Unha SLV and 95 m away from the people on the road.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/geo4nonpro/wk1i5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Narrowing down the location of the photographer with mensuration. Comparing the imaged heights of the pedestrians’ heads and the Unha SLV to the known heights of these objects suggests that the launch tower is 4x further from the camera than the people are. A little while spent drawing lines in Google Earth suggests that the people 95 m away from the camera. </div> <p>The location obtained by mensuration (above, yellow lines) is close to the (less precise) intersection of sightlines (above, red lines). I’ve drawn a guessed uncertainty ellipse on the map in dashed yellow: from the agreement between the data shown here, I think that the location of the photographer is accurate to within 5-10 m. Not bad at all!</p>]]></content><author><name></name></author><category term="hobbies"/><category term="geolocation"/><summary type="html"><![CDATA[Geolocating a space launch site]]></summary></entry></feed>